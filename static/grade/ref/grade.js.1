
/*

Spec: 
 Load rooms by room name 

	ScannerTable: 

	Load item any order

	item { a,4,c,d,e,f } 
	item { a,4,c,d,e,f } 
	item { a,4,c,d,e,f } 
	item { a,4,c,d,e,f } 
	item { a,b,c,d,e,f } 
	item { a,b,c,f,e,f } 
	item { a,b,c,f,e,f } 
	item { a,b,c,f,e,f } 
	item { a,b,c,f,e,f } 

        Store all the entries
        New item
		for all entries, if entry = same 
		 	fill index  
				( store repetition ) 

	4 = tem1,item2,cc,dd  (4) 
	F = gg,hh,ii,jj (16)
	d = (1)
	d = (2) 
	
*/

var dias = [10,11,12];
var espacos = ['1','2','3','4','5','6','7'];
var horarios = [10,11,12,13,14,15,16,16];

var grade =  {

	descricao : new Array(),
	head : '',
	local : new Array(),

	start : function () { 

		this.element = document.createElement('div');
		this.element.setAttribute("class","gradeContainer");
		document.getElementById('container').appendChild(this.element);
		var ddate = new Date();

		dday = ddate.getDate();
		var currentDay = this.evento[dday];

		var head ="<tr><td colspan='7'><h2> " + this.descricao[dday] + "</h2></td>";
		head+="<td><h3> " + this.local[dday] + "</h3></td></tr>";

		head += '<tr> <th class="EmptyHeader"> Horário </th> <th class="RoomCell">Espaço Brasil</th> <th class="RoomCell">Espaço Paraguai</th> <th class="RoomCell">Espaço Uruguai</th> <th class="RoomCell">Espaço Bolívia</th> <th class="RoomCell">Espaço Chile</th> <th class="RoomCell">Espaço Peru</th> <th class="RoomCell">Espaço Equador</th> </tr>';

		var innerAll = "";
		var strBuffer = "<table class='grade'>";
		for ( local in espacos ) { 

			strBuffer +="<tr>";
			
			for ( horario in horarios ) { 
				var currentItemId="local_"+local+"_horario_"+horario;
				strBuffer+="<td id='"+currentItemId+"'></td>";
			} 

			strBuffer += "</tr>";

		} 

		strBuffer+="</table>";


//			innerTd += "<tr id='day_"+currentDay+"_' ><td align='right'>"+eventItem.inicio+" - "+ eventItem.fim+" </td><td>"+ eventItem.descricao +"<span class='gradeLocal'> @ "+eventItem.local+"</span></tr>";
//			innerAll += innerTd;

/*
			var eventItem = currentDay[key]; 
			var hours = parseInt(eventItem.fim.split(":")[0])*60 +  parseInt(eventItem.fim.split(":")[1]);

			var foundId = hours
			var innerTd = "<tr id='rule_"+hours+"' ><td align='right'>"+eventItem.inicio+" - "+ eventItem.fim+" </td><td>"+ eventItem.descricao +"<span class='gradeLocal'> @ "+eventItem.local+"</span></tr>";

			innerAll += innerTd;
*/
		}
		this.element.innerHTML += strBuffer;
		this.tick();

	} ,

	tick : function () {
		this.data = new Date();
		this.month = this.data.getMonth() + 1;
		this.day = this.data.getDate();
		
		this.hours = this.data.getHours();
		this.minutes = this.data.getMinutes();
                var ddate = new Date();
                var currentDay = this.evento[ddate.getDate()];
                var innerAll = "";

		var font=200;
		var actual = this.hours * 60 + this.minutes; 

                for (key in currentDay) {
                        var eventItem = currentDay[key];
			var hours =0;
			try { 
				hours =   parseInt(eventItem.fim.split(":")[0])*60 + parseInt(eventItem.fim.split(":")[1]);
			} catch(i) { hours = 3600 } 

			if( hours<actual ) { 
 				document.getElementById("rule_"+hours).style.display="none";	
			} else { 
 				document.getElementById("rule_"+hours).style.fontSize=font+"%";	
				font*=.9;
			}  
			

                }

		var scopedThis = this;
		setTimeout( function () { scopedThis.tick() }, 5000);
	},

	init : function () { 
		this.descricao["11"] = "11th International Workshop on Real and Complex Singularities";
		this.local["11"] = "Wednesday 28th @ ICMC USP";
		this.descricao["12"] = "11th International Workshop on Real and Complex Singularities";
		this.local["12"] = "Thursday 29th @ ICMC USP";
	} ,

evento : { 

"11": [ 

{ inicio: "10:00",
  fim: "18:00 ",
  descricao: "Mini-course J. Nuno",
  sigla: "- ", 
  local: "Espaço Brasil",
  apresentador: ""
},



] 

}

} // end of grade 


